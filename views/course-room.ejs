<%- include("header"); %>

<link rel="stylesheet" href="/css/course-room.css">
<script src="/socket.io/socket.io.js"></script>
<script src="/js/libraries/peerjs.min.js"></script>

<% if (locals.user) { %>
  <script>
    // Declarations for following scripts
    // Get user info from locals
    let user = {
      userId: <%- locals.user.id %>, // TODO: Check if this line is needed
      firstName: "<%- locals.user.first_name %>",
      roomId: "<%- locals.institution_code.toLowerCase() + '_' + locals.course_code.toLowerCase() %>"
    }
    console.log("ejs roomId: " + user.roomId);
    let socket = io();
  </script>
  <% if (locals.messagesList) { %>
    <script>
      let messagesList = <%- JSON.stringify(locals.messagesList) %>;
    </script>
  <% } %>
<% } else {
  console.log("User not logged in!");
} %>

<script src="/js/libraries/moment.min.js"></script>
<script src="/js/roomClientSide.js"></script>
<script src="/js/chatSocket.js"></script>

<div class=".container mx-4">
  <div class="row">

    <div class="card participant-card col-xs-12 col-md-1">
      <div class="card-body">
        <ul id="clients">

        </ul>
      </div>
    </div>
    <div class="card video-card col-xs-12 col-md-7">
      <div class="card-body">
        <div id="video-grid">

        </div>
      </div>
    </div>
    <div class="card col-xs-12 col-md-4">

        <div class="card-header">
          Chat messages
        </div>
        <div class="card-body message-container" id="messages-container">
          <ul id="messages" class="vertical-scrollable">

          </ul>
        </div>
        <form id="form" action="">
          <input id="input" autocomplete="off" /><button>Send</button>
        </form>

    </div>
  </div>

  <div class="row">
    <div class="col-xs-12 col-sm-4">

    </div>
    <div class="col-xs-12 col-sm-4">




    </div>
    <div class="col-xs-12 col-sm-4">

    </div>

  </div>

</div>




<%- include("footer"); %>
